(function(l){function t(t){for(var s,c,o=t[0],a=t[1],r=t[2],h=0,f=[];h<o.length;h++)c=o[h],n[c]&&f.push(n[c][0]),n[c]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(l[s]=a[s]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,r||[]),e()}function e(){for(var l,t=0;t<i.length;t++){for(var e=i[t],s=!0,o=1;o<e.length;o++){var a=e[o];0!==n[a]&&(s=!1)}s&&(i.splice(t--,1),l=c(c.s=e[0]))}return l}var s={},n={app:0},i=[];function c(t){if(s[t])return s[t].exports;var e=s[t]={i:t,l:!1,exports:{}};return l[t].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.m=l,c.c=s,c.d=function(l,t,e){c.o(l,t)||Object.defineProperty(l,t,{enumerable:!0,get:e})},c.r=function(l){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},c.t=function(l,t){if(1&t&&(l=c(l)),8&t)return l;if(4&t&&"object"===typeof l&&l&&l.__esModule)return l;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:l}),2&t&&"string"!=typeof l)for(var s in l)c.d(e,s,function(t){return l[t]}.bind(null,s));return e},c.n=function(l){var t=l&&l.__esModule?function(){return l["default"]}:function(){return l};return c.d(t,"a",t),t},c.o=function(l,t){return Object.prototype.hasOwnProperty.call(l,t)},c.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var r=0;r<o.length;r++)t(o[r]);var u=a;i.push([0,"chunk-vendors"]),e()})({0:function(l,t,e){l.exports=e("56d7")},"1c95":function(l,t,e){},"56d7":function(l,t,e){"use strict";e.r(t);e("cadf"),e("551c"),e("f751"),e("097d");var s=e("2b0e"),n=function(){var l=this,t=l.$createElement,s=l._self._c||t;return s("div",{attrs:{id:"app"}},[s("h1",[l._v("TETRIS")]),s("ttrs"),s("img",{staticClass:"main_logo",attrs:{src:e("cf05"),alt:"てとりす"},on:{click:l.reload}})],1)},i=[],c=function(){var l=this,t=l.$createElement,e=l._self._c||t;return e("div",{staticClass:"ttrs",on:{keydown:[function(t){return!t.type.indexOf("key")&&l._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:l.moveLeft(t)},function(t){return!t.type.indexOf("key")&&l._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])?null:"button"in t&&2!==t.button?null:l.moveRight(t)},function(t){return!t.type.indexOf("key")&&l._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:l.fallTrough(t)}]}},[e("p",[l._v(l._s(l.state))]),e("table",l._l(l.height,function(t){return e("tr",{key:t.id},l._l(l.width,function(l){return e("td",{key:l.id})}),0)}),0),e("button",{on:{click:l.start}},[l._v(l._s(l.click))]),e("button",{on:{click:l.moveLeft}},[l._v("左")]),e("button",{on:{click:l.fallTrough}},[l._v("下")]),e("button",{on:{click:l.moveRight}},[l._v("右")]),e("button",[l._v("回転(未実装)")])])},o=[],a=(e("ac6a"),e("456d"),{data:function(){return{width:[" "," "," "," "," "," "," "," "," "," "],height:[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],intervalId:void 0,state:"スタートを押してね",ready:!1,click:"スタート",blocks:[{class:"i",pattern:[[1,1,1,1]]},{class:"o",pattern:[[1,1],[1,1]]},{class:"t",pattern:[[0,1,0],[1,1,1]]},{class:"s",pattern:[[0,1,1],[1,1,0]]},{class:"z",pattern:[[1,1,0],[0,1,1]]},{class:"j",pattern:[[0,0,1],[1,1,1]]},{class:"l",pattern:[[1,0,0],[1,1,1]]}],td_array:"",cells:[],index:0,isFalling:!1,keys:"",nextBlockKey:"",nextBlock:"",pattern:"",fallingBlockNum:0,nextFallingBlockNum:"",canDelete:!0,moving:!0}},methods:{start:function(){var l=this;this.state="てっててっててーてってててってー",0==this.ready?(this.ready=!this.ready,this.click="一時停止",console.log(this.ready),this.intervalId=setInterval(function(){l.checkGameOver(),l.hasFallingBlock()?(l.fallBlocks(),console.log("otiru")):(l.deleteRow(),l.generateBlock(),console.log("tukuru"))},1e3)):(this.ready=!this.ready,this.click="スタート",console.log(this.ready),clearInterval(this.intervalId))},loadTable:function(){this.td_array=document.getElementsByTagName("td");for(var l=0;l<20;l++){this.cells[l]=[];for(var t=0;t<10;t++)this.cells[l][t]=this.td_array[this.index],this.index++}},fallBlocks:function(){for(var l=0;l<10;l++)if(this.cells[19][l].blockNum===this.fallingBlockNum)return void(this.isFalling=!1);for(var t=18;t>=0;t--)for(var e=0;e<10;e++)if(this.cells[t][e].blockNum===this.fallingBlockNum&&""!==this.cells[t+1][e].className&&this.cells[t+1][e].blockNum!==this.fallingBlockNum)return void(this.isFalling=!1);for(t=18;t>=0;t--)for(e=0;e<10;e++)this.cells[t][e].base&&(this.cells[t][e].base=!0,this.cells[t][e].base=null),this.cells[t][e].blockNum===this.fallingBlockNum&&(this.cells[t+1][e].className=this.cells[t][e].className,this.cells[t+1][e].blockNum=this.cells[t][e].blockNum,this.cells[t][e].className="",this.cells[t][e].blockNum=null)},hasFallingBlock:function(){return this.isFalling},generateBlock:function(){for(var l=0;l<20;l++)for(var t=0;t<10;t++)this.cells[l][t].base&&(this.cells[l][t].base=null);this.keys=Object.keys(this.blocks),this.nextBlockKey=this.keys[Math.floor(Math.random()*this.keys.length)],console.log(this.nextBlockKey),this.nextBlock=this.blocks[this.nextBlockKey],this.nextFallingBlockNum=this.fallingBlockNum+1,this.pattern=this.nextBlock.pattern;for(l=0;l<this.pattern.length;l++)for(t=0;t<this.pattern[l].length;t++)this.pattern[l][t]&&(this.cells[l][t+3].className=this.nextBlock.class,this.cells[l][t+3].blockNum=this.nextFallingBlockNum);this.isFalling=!0,this.fallingBlockNum=this.nextFallingBlockNum},deleteRow:function(){var l=19;while(l>=0){this.canDelete=!0;for(var t=0;t<10;t++)""===this.cells[l][t].className&&(this.canDelete=!1);if(this.canDelete){for(t=0;t<10;t++)this.cells[l][t].className="";for(var e=l-1;e>=0;e--)for(t=0;t<10;t++)this.cells[e+1][t].className=this.cells[e][t].className,this.cells[e+1][t].blockNum=this.cells[e][t].blockNum,this.cells[e][t].className="",this.cells[e][t].blockNum=null}else l--}},moveLeft:function(){for(var l=0;l<20;l++)if(this.cells[l][0].blockNum===this.fallingBlockNum)return;for(l=0;l<20;l++)for(var t=1;t<10;t++)if(this.cells[l][t].blockNum===this.fallingBlockNum&&""!==this.cells[l][t-1].className&&this.cells[l][t-1].blockNum!==this.fallingBlockNum)return;for(l=0;l<20;l++)for(t=1;t<10;t++)this.cells[l][t].base&&(this.cells[l][t-1].base=!0,this.cells[l][t].base=null),this.cells[l][t].blockNum===this.fallingBlockNum&&(this.cells[l][t-1].className=this.cells[l][t].className,this.cells[l][t-1].blockNum=this.cells[l][t].blockNum,this.cells[l][t].className="",this.cells[l][t].blockNum=null)},moveRight:function(){for(var l=0;l<20;l++)if(this.cells[l][9].blockNum===this.fallingBlockNum)return;for(l=0;l<20;l++)for(var t=8;t>=0;t--)if(this.cells[l][t].blockNum===this.fallingBlockNum&&""!==this.cells[l][t+1].className&&this.cells[l][t+1].blockNum!==this.fallingBlockNum)return;for(l=0;l<20;l++)for(t=8;t>=0;t--)this.cells[l][t].base&&(this.cells[l][t+1].base=!0,this.cells[l][t].base=null),this.cells[l][t].blockNum===this.fallingBlockNum&&(this.cells[l][t+1].className=this.cells[l][t].className,this.cells[l][t+1].blockNum=this.cells[l][t].blockNum,this.cells[l][t].className="",this.cells[l][t].blockNum=null)},fallTrough:function(){while(this.isFalling)this.fallBlocks()},checkGameOver:function(){for(var l=0;l<2;l++)for(var t=0;t<10;t++)""!==this.cells[l][t].className&&this.cells[l][t].blockNum!==this.fallingBlockNum&&(clearInterval(this.intervalId),console.log("Game Over!"),this.state="げーむおーばー！")}},mounted:function(){this.loadTable()},beforeDestroy:function(){console.log("clearInterval"),clearInterval(this.intervalId)}}),r=a,u=(e("b383"),e("2877")),h=Object(u["a"])(r,c,o,!1,null,"4051fe42",null),f=h.exports,k={name:"app",components:{ttrs:f},methods:{reload:function(){location.reload(!1)}}},m=k,d=(e("5c0b"),Object(u["a"])(m,n,i,!1,null,null,null)),b=d.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(l){return l(b)}}).$mount("#app")},"5c0b":function(l,t,e){"use strict";var s=e("5e27"),n=e.n(s);n.a},"5e27":function(l,t,e){},b383:function(l,t,e){"use strict";var s=e("1c95"),n=e.n(s);n.a},cf05:function(l,t,e){l.exports=e.p+"img/logo.1b2afed2.png"}});
//# sourceMappingURL=app.d76789bc.js.map