(function(t){function s(s){for(var e,c,o=s[0],n=s[1],r=s[2],u=0,f=[];u<o.length;u++)c=o[u],i[c]&&f.push(i[c][0]),i[c]=0;for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);h&&h(s);while(f.length)f.shift()();return a.push.apply(a,r||[]),l()}function l(){for(var t,s=0;s<a.length;s++){for(var l=a[s],e=!0,o=1;o<l.length;o++){var n=l[o];0!==i[n]&&(e=!1)}e&&(a.splice(s--,1),t=c(c.s=l[0]))}return t}var e={},i={app:0},a=[];function c(s){if(e[s])return e[s].exports;var l=e[s]={i:s,l:!1,exports:{}};return t[s].call(l.exports,l,l.exports,c),l.l=!0,l.exports}c.m=t,c.c=e,c.d=function(t,s,l){c.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:l})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,s){if(1&s&&(t=c(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var l=Object.create(null);if(c.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var e in t)c.d(l,e,function(s){return t[s]}.bind(null,e));return l},c.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(s,"a",s),s},c.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},c.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],n=o.push.bind(o);o.push=s,o=o.slice();for(var r=0;r<o.length;r++)s(o[r]);var h=n;a.push([0,"chunk-vendors"]),l()})({0:function(t,s,l){t.exports=l("56d7")},"56d7":function(t,s,l){"use strict";l.r(s);l("cadf"),l("551c"),l("f751"),l("097d");var e=l("2b0e"),i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("ttrs"),e("img",{staticClass:"main_logo",attrs:{src:l("cf05"),alt:"てとりす"},on:{click:t.reload}})],1)},a=[],c=(l("73ec"),function(){var t=this,s=t.$createElement,l=t._self._c||s;return l("div",{staticClass:"ttrs"},[l("p",[t._v(t._s(t.state))]),l("p",[t._v("現在のスコア:"+t._s(t.score))]),l("p",[t._v("今までのハイスコア:"+t._s(t.Highscore))]),l("table",t._l(t.height,function(s){return l("tr",{key:s.id},t._l(t.width,function(t){return l("td",{key:t.id})}),0)}),0),l("div",{staticClass:"btn_set"},[l("div",{staticClass:"btn"},[l("span",{staticClass:"btn_bg",on:{click:t.moveLeft}},[l("i",{staticClass:"fas fa-angle-left"})]),l("span",{staticClass:"btn_bg",on:{click:t.moveDown}},[l("i",{staticClass:"fas fa-angle-left"})]),l("span",{staticClass:"btn_bg",on:{click:t.moveRight}},[l("i",{staticClass:"fas fa-angle-left"})]),l("span",{staticClass:"btn_bg",on:{click:t.rotate}},[l("i",{staticClass:"fas fa-undo"})]),l("span",{staticClass:"btn_bg",on:{click:t.fallTrough}},[l("i",{staticClass:"fas fa-angle-double-left"})]),l("span",{staticClass:"text_bg",on:{click:t.start}},[l("span",[t._v(t._s(t.click))])])])])])}),o=[],n=(l("ac6a"),l("456d"),{data:function(){return{width:[" "," "," "," "," "," "," "," "," "," "],height:[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],intervalId:void 0,state:"スタートを押してね",ready:!1,click:"Start",blocks:[{class:"i",pattern:[[0,0,0,0],[1,1,1,1]]},{class:"o",pattern:[[1,1],[1,1]]},{class:"t",pattern:[[0,1,0],[1,1,1]]},{class:"s",pattern:[[0,1,1],[1,1,0]]},{class:"z",pattern:[[1,1,0],[0,1,1]]},{class:"j",pattern:[[0,0,1],[1,1,1]]},{class:"l",pattern:[[1,0,0],[1,1,1]]}],td_array:"",cells:[],index:0,isFalling:!1,keys:"",nextBlockKey:"",nextBlock:"",pattern:"",fallingBlockNum:0,nextFallingBlockNum:"",canDelete:!0,score:0,speed:950,blockRange:0,initRow:"",initCol:"",blockClass:"",rotatedBlockClass:""}},methods:{start:function(){var t=this;this.state="てっててっててーてってててってー",0==this.ready?(this.ready=!this.ready,this.click="Pause",this.intervalId=setInterval(function(){t.Highscore<t.score&&t.$store.commit("setScore",t.score),t.checkGameOver(),t.hasFallingBlock()?t.fallBlocks():(t.deleteRow(),t.generateBlock())},this.speed)):(this.ready=!this.ready,console.log(this.ready),this.click="Start",clearInterval(this.intervalId))},loadTable:function(){this.td_array=document.getElementsByTagName("td");for(var t=0;t<20;t++){this.cells[t]=[];for(var s=0;s<10;s++)this.cells[t][s]=this.td_array[this.index],this.index++}},fallBlocks:function(){for(var t=0;t<10;t++)if(this.cells[19][t].blockNum===this.fallingBlockNum)return void(this.isFalling=!1);for(var s=18;s>=0;s--)for(var l=0;l<10;l++)if(this.cells[s][l].blockNum===this.fallingBlockNum&&""!==this.cells[s+1][l].className&&this.cells[s+1][l].blockNum!==this.fallingBlockNum)return void(this.isFalling=!1);for(s=18;s>=0;s--)for(l=0;l<10;l++)this.cells[s][l].base&&(this.cells[s+1][l].base=!0,this.cells[s][l].base=null),this.cells[s][l].blockNum===this.fallingBlockNum&&(this.cells[s+1][l].className=this.cells[s][l].className,this.cells[s+1][l].blockNum=this.cells[s][l].blockNum,this.cells[s][l].className="",this.cells[s][l].blockNum=null)},hasFallingBlock:function(){return this.isFalling},generateBlock:function(){for(var t=0;t<20;t++)for(var s=0;s<10;s++)this.cells[t][s].base&&(this.cells[t][s].base=null);this.keys=Object.keys(this.blocks),this.nextBlockKey=this.keys[Math.floor(Math.random()*this.keys.length)],console.log(this.nextBlockKey),this.nextBlock=this.blocks[this.nextBlockKey],this.nextFallingBlockNum=this.fallingBlockNum+1,this.pattern=this.nextBlock.pattern,this.cells[0][3].base=!0;for(t=0;t<this.pattern.length;t++)for(s=0;s<this.pattern[t].length;s++)this.pattern[t][s]&&(this.cells[t][s+3].className=this.nextBlock.class,this.cells[t][s+3].blockNum=this.nextFallingBlockNum,this.score+=100);this.isFalling=!0,this.fallingBlockNum=this.nextFallingBlockNum},deleteRow:function(){var t=19;while(t>=0){this.canDelete=!0;for(var s=0;s<10;s++)""===this.cells[t][s].className&&(this.canDelete=!1);if(this.canDelete){for(s=0;s<10;s++)this.cells[t][s].className="";for(var l=t-1;l>=0;l--)for(s=0;s<10;s++)this.cells[l+1][s].className=this.cells[l][s].className,this.cells[l+1][s].blockNum=this.cells[l][s].blockNum,this.cells[l][s].className="",this.cells[l][s].blockNum=null,this.score+=70}else t--}},moveLeft:function(){if(this.ready){for(var t=0;t<20;t++)if(this.cells[t][0].blockNum===this.fallingBlockNum)return;for(t=0;t<20;t++)for(var s=1;s<10;s++)if(this.cells[t][s].blockNum===this.fallingBlockNum&&""!==this.cells[t][s-1].className&&this.cells[t][s-1].blockNum!==this.fallingBlockNum)return;for(t=0;t<20;t++)for(s=1;s<10;s++)this.cells[t][s].base&&(this.cells[t][s-1].base=!0,this.cells[t][s].base=null),this.cells[t][s].blockNum===this.fallingBlockNum&&(this.cells[t][s-1].className=this.cells[t][s].className,this.cells[t][s-1].blockNum=this.cells[t][s].blockNum,this.cells[t][s].className="",this.cells[t][s].blockNum=null)}},moveRight:function(){if(this.ready){for(var t=0;t<20;t++)if(this.cells[t][9].blockNum===this.fallingBlockNum)return;for(t=0;t<20;t++)for(var s=8;s>=0;s--)if(this.cells[t][s].blockNum===this.fallingBlockNum&&""!==this.cells[t][s+1].className&&this.cells[t][s+1].blockNum!==this.fallingBlockNum)return;for(t=0;t<20;t++)for(s=8;s>=0;s--)this.cells[t][s].base&&(this.cells[t][s+1].base=!0,this.cells[t][s].base=null),this.cells[t][s].blockNum===this.fallingBlockNum&&(this.cells[t][s+1].className=this.cells[t][s].className,this.cells[t][s+1].blockNum=this.cells[t][s].blockNum,this.cells[t][s].className="",this.cells[t][s].blockNum=null)}},moveDown:function(){this.ready&&this.hasFallingBlock()&&this.fallBlocks()},fallTrough:function(){if(this.ready)while(this.isFalling)this.fallBlocks()},rotate:function(){if(this.ready){for(var t=0;t<20;t++)for(var s=0;s<10;s++)if(this.cells[t][s].blockNum===this.fallingBlockNum){if("o"===this.cells[t][s].className)return;"i"===this.cells[t][s].className?this.blockRange=4:this.blockRange=3,this.blockClass=this.cells[t][s].className;break}for(t=0;t<20;t++)for(s=0;s<10;s++)if(this.cells[t][s].base){this.initRow=t,this.initCol=s;break}for(var l=0;l<this.blockRange;l++)for(var e=0;e<this.blockRange;e++)if(""!==this.cells[this.initRow+l][this.initCol+e].className&&this.cells[this.initRow+l][this.initCol+e].blockNum!==this.fallingBlockNum)return;3===this.blockRange?this.rotatedBlockClass=[["","",""],["","",""],["","",""]]:4===this.blockRange&&(this.rotatedBlockClass=[["","","",""],["","","",""],["","","",""],["","","",""]]);for(l=0;l<this.blockRange;l++)for(e=0;e<this.blockRange;e++)this.rotatedBlockClass[e][this.blockRange-1-l]=this.cells[this.initRow+l][this.initCol+e].className;for(l=0;l<this.blockRange;l++)for(e=0;e<this.blockRange;e++)this.cells[this.initRow+l][this.initCol+e].blockNum=null,this.cells[this.initRow+l][this.initCol+e].className=this.rotatedBlockClass[l][e],""!==this.rotatedBlockClass[l][e]&&(this.cells[this.initRow+l][this.initCol+e].blockNum=this.fallingBlockNum)}},keyactive:function(t){37===t.keyCode||65===t.keyCode?this.moveLeft():39===t.keyCode||68===t.keyCode?this.moveRight():38===t.keyCode||87===t.keyCode?this.fallTrough():40===t.keyCode||83===t.keyCode?this.moveDown():32===t.keyCode?this.rotate():13!==t.keyCode&&80!==t.keyCode||this.start()},checkGameOver:function(){for(var t=0;t<2;t++)for(var s=0;s<10;s++)""!==this.cells[t][s].className&&this.cells[t][s].blockNum!==this.fallingBlockNum&&(clearInterval(this.intervalId),this.state="げーむおーばー！")}},mounted:function(){this.loadTable(),window.addEventListener("keydown",this.keyactive)},computed:{Highscore:function(){return this.$store.getters.Highscore}},beforeDestroy:function(){clearInterval(this.intervalId)}}),r=n,h=(l("d3f2"),l("2877")),u=Object(h["a"])(r,c,o,!1,null,"9cf29e84",null),f=u.exports,k={name:"app",components:{ttrs:f},methods:{reload:function(){location.reload(!1)}}},m=k,d=(l("5c0b"),Object(h["a"])(m,i,a,!1,null,null,null)),b=d.exports,g=l("2f62"),N=l("0e44");e["a"].use(g["a"]);var v=new g["a"].Store({state:{Highscore:0},getters:{Highscore:function(t){return t.Highscore}},mutations:{setScore:function(t,s){t.Highscore=s}},plugins:[Object(N["a"])()]});e["a"].config.productionTip=!1,new e["a"]({store:v,render:function(t){return t(b)}}).$mount("#app")},"5c0b":function(t,s,l){"use strict";var e=l("5e27"),i=l.n(e);i.a},"5e27":function(t,s,l){},"73ec":function(t,s,l){},9634:function(t,s,l){},cf05:function(t,s,l){t.exports=l.p+"img/logo.1b2afed2.png"},d3f2:function(t,s,l){"use strict";var e=l("9634"),i=l.n(e);i.a}});
//# sourceMappingURL=app.6147b742.js.map